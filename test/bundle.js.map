{"version":3,"sources":["webpack:///webpack/bootstrap eadc9d0eecd7477f2e59","webpack:///./test/vector.js","webpack:///./test/player.js","webpack:///./test/state.js","webpack:///./test/power-of-friendship.js","webpack:///./test/level.js","webpack:///./test/finley.js","webpack:///./test/frankie.js","webpack:///./test/poison.js","webpack:///./node_modules/constants-browserify/constants.json","webpack:///./test/display.js","webpack:///./test/level_maps.js"],"names":["Vector","constructor","x","y","plus","otherVector","times","factor","Player","pos","ch","speed","size","xSpeed","jumpSpeed","moveX","time","state","keys","overlap","left","player","right","movedX","level","touching","moveY","gravity","motion","newPos","obstacle","up","update","actor","actors","Actor","State","status","switchKey","finleyStatus","frankieStatus","find","name","nonPlayers","filter","Object","getPrototypeOf","switch","start","a","horizontalOverlap","horizontalDistance","verticalOverlap","verticalDistance","map","newState","collide","keyCodes","audio","document","getElementById","finish","volume","detectKeys","isPressed","create","track","e","hasOwnProperty","keyCode","preventDefault","isKeydown","type","window","addEventListener","runAnimation","frameFunction","lastTime","frame","timeStep","Math","min","requestAnimationFrame","runLevel","successFunction","gameWrapper","display","ending","drawFrame","play","clear","runGame","startLevel","n","levelMaps","length","alert","actorChars","Poison","Level","levelMap","rows","width","height","line","currRow","fieldType","push","xStart","floor","xEnd","ceil","yStart","yEnd","Finley","finleySize","finleyXSpeed","finleyJumpSpeed","Frankie","frankieSize","frankieXSpeed","frankieJumpSpeed","resetPos","scale","createElement","className","element","Display","parent","wrapper","appendChild","actorLayer","drawBackground","drawActors","bind","table","style","forEach","row","rowElement","el","toLowerCase","top","remove","scrollPlayerIntoView","clientWidth","clientHeight","margin","scrollLeft","scrollTop","bottom","center","parentNode","removeChild"],"mappings":"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AOpJ,CAAP,GAAWmJ,SAASH,MAAxB,EAAgC;AACnC,iBAAKlB,OAAL,CAAaoB,SAAb,GAAyBE,OAAOpJ,CAAP,GAAWgJ,MAAX,GAAoB5C,MAA7C;AACH;AAEJ;;AAEDb,YAAQ;AACJ;AACA,aAAKuC,OAAL,CAAauB,UAAb,CAAwBC,WAAxB,CAAoC,KAAKxB,OAAzC;AACH;AA7FS;;AAgGd,yDAAeF,OAAf,E;;;;;;;AC1GA,MAAMjC,YAAY,CAEhB,CAAI,qEAAJ,EACA,qEADA,EAEA,mEAFA,EAGA,mEAHA,EAIA,oEAJA,EAKA,qDALA,EAMA,iEANA,CAFgB,CAAlB;;AAYI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACF;;;AAGJ,yDAAeA,SAAf,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap eadc9d0eecd7477f2e59","class Vector {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    plus(otherVector) {\n        return new Vector(this.x + otherVector.x, this.y + otherVector.y);\n    }\n\n    // to get distance traveled during a particular time\n    times(factor) {\n        return new Vector(this.x * factor, this.y * factor);\n    }\n}\n\nexport default Vector;\n\n\n// WEBPACK FOOTER //\n// ./test/vector.js","import Vector from './vector';\n\nclass Player {\n    constructor(pos, ch, speed, size, xSpeed, jumpSpeed) {\n        this.pos = pos;\n        this.speed = speed || new Vector(0, 0); // initial speed\n        this.size = size;\n        this.xSpeed = xSpeed;\n        this.jumpSpeed = jumpSpeed;\n    }\n\n    moveX(time, state, keys, overlap) {\n        this.speed.x = 0;\n        if (keys.left && this === state.player & !(overlap === 'rightOverlap')) this.speed.x -= this.xSpeed;\n        if (keys.right && this === state.player & !(overlap === 'leftOverlap')) this.speed.x += this.xSpeed;\n\n\n        // if ((keys.left || keys.right || keys.up) && this === state.player) {\n        //     if (this.speed.x < this.xSpeed && this.speed.x > -this.xSpeed) {\n        //     if (keys.left) this.speed.x -= this.xSpeed;\n        //     if (keys.right) this.speed.x += this.xSpeed;\n        //     } else if (this.speed.x === this.xSpeed || this.speed.x === -this.xSpeed) {\n        //       if (keys.left && this.speed.x === this.xSpeed) this.speed.x -= this.xSpeed;\n        //       if (keys.right && this.speed.x === -this.xSpeed) this.speed.x += this.xSpeed;\n        //     } \n        //   } else { \n        //     if (this.speed.x > 0) this.speed.x -= this.speed.x < this.xSpeed ? this.speed.x : this.xSpeed;\n        //     if (this.speed.x < 0) this.speed.x += this.speed.x > -this.xSpeed ? -this.speed.x : this.xSpeed;\n        //   }\n\n        const movedX = this.pos.plus(new Vector(this.speed.x * time, 0));\n        if (state.level.touching(movedX, this.size) !== 'wall') {\n            this.pos = movedX;\n        }\n    }\n\n    moveY(time, state, keys, overlap) {\n        this.speed.y += time * state.gravity;\n        const motion = new Vector(0, this.speed.y * time);\n        const newPos = this.pos.plus(motion); \n        const obstacle = state.level.touching(newPos, this.size);\n        if (obstacle || overlap === 'topOverlap' && this === state.player) {\n            if (overlap === 'topOverlap' && this.speed.y < 0) {\n                this.pos = newPos;\n            } else if (obstacle === 'trampoline') {\n                this.speed.y = -this.jumpSpeed;\n                this.jumpSpeed = -this.jumpSpeed;\n            } else if (keys.up && (this.speed.y >= 0 || overlap === 'topOverlap') && this === state.player) {\n                this.speed.y = -this.jumpSpeed;\n            } else if (obstacle === 'water' || obstacle === 'instruction') {\n                this.pos = newPos;\n            } else {\n                this.speed.y = 0;\n            }\n        } else { \n            this.pos = newPos;\n        }\n    }\n\n    update (time, state, keys) {\n        let overlap;\n        for(let actor of state.actors) {\n            if (actor !== state.player) {\n                overlap = state.overlap(this, actor);\n                if (overlap) break;\n            }\n        }\n\n        this.moveX(time, state, keys, overlap);\n        this.moveY(time, state, keys, overlap);\n\n        const Actor = this.constructor;\n        return new Actor(this.pos, null, new Vector(this.speed.x, this.speed.y));\n    }\n\n}\n\nexport default Player;\n\n\n// WEBPACK FOOTER //\n// ./test/player.js","// unsure how to manage current player\n\nclass State {\n    constructor(level, actors, status, player, switchKey, gravity, finleyStatus, frankieStatus) {\n        this.level = level;\n        this.actors = actors;\n        this.player = this.actors.find(actor => actor.constructor.name === player.constructor.name);\n        this.nonPlayers = this.actors.filter(actor => Object.getPrototypeOf(Object.getPrototypeOf(actor)).constructor.name === 'Player' && actor !== this.player);\n        this.status = status;\n        this.gravity = gravity || 10;\n        // if (this.level.width === 15) this.gravity = -1;\n        // if (this.level.width === 66 && this.player.pos.y < 60 && this.player.pos.y > 4) this.gravity = .05;\n        // this.finleyStatus = finleyStatus || null;\n        // this.frankieStatus = frankieStatus || null;\n        // console.log (this.finleyStatus);\n        // console.log (this.frankieStatus);\n\n        // to check whether switch is currently being pressed to prevent repeat switching on update\n        this.switch = switchKey;\n    }\n\n    static start(level) {\n        return new State(level, level.actors, \"playing\", level.actors.find(a => a.constructor.name === 'Finley'));\n    }\n\n    overlap(player, actor) {\n\n        if (Object.getPrototypeOf(Object.getPrototypeOf(actor)).constructor.name === 'Player') {\n\n        // player on top if actor.y - player.y > 0\n        // player on bottom if actor.y - player.y < 0\n\n        // player on left if actor.x - player.x > 0\n        // player on right if actor.x - player.x < 0\n\n        // if player.pos.x + player.size.x  / 2 (center of player) - actor.pos.x + actor.size.x / 2 (center of actor) +-.01(-(player.size.x / 2 + actor.size.x/2)) -- player can't move right\n\n        const horizontalOverlap = (player.pos.x + player.size.x / 2) - (actor.pos.x + actor.size.x / 2);\n        const horizontalDistance = player.size.x / 2 + actor.size.x / 2;\n\n        const verticalOverlap = (player.pos.y + player.size.y / 2) - (actor.pos.y + actor.size.y / 2);\n        const verticalDistance = player.size.y / 2 + actor.size.y / 2;\n\n        // if (horizontalOverlap >= horizontalDistance - .2 && horizontalOverlap <= horizontalDistance + .2) { console.log('left overlap', horizontalDistance); }\n\n        // if (-horizontalOverlap >= horizontalDistance - .2 && horizontalOverlap <= horizontalDistance + .2) { console.log('right overlap', horizontalDistance); }\n\n        // if (verticalOverlap >= verticalDistance - .2 && verticalOverlap <= verticalDistance + .2) { console.log('bottom overlap', verticalDistance); }\n\n        if (\n            (-verticalOverlap >= verticalDistance - .1 && -verticalOverlap <= verticalDistance + .1) \n                && (\n                (player.pos.x + player.size.x > actor.pos.x \n                    && player.pos.x + player.size.x < actor.pos.x + actor.size.x) \n                || (player.pos.x > actor.pos.x \n                    && player.pos.x < actor.pos.x + actor.size.x) \n                || (player.pos.x < actor.pos.x \n                    && player.pos.x + player.size.x > actor.pos.x + actor.size.x) \n                || (player.pos.x > actor.pos.x && player.pos.x + player.size.x < actor.pos.x + actor.size.x )\n            )\n        ) { return('topOverlap'); }\n\n        if (\n            (verticalOverlap >= verticalDistance - .1 && verticalOverlap <= verticalDistance + .1) \n                && (\n                (player.pos.x + player.size.x > actor.pos.x \n                    && player.pos.x + player.size.x < actor.pos.x + actor.size.x) \n                || (player.pos.x > actor.pos.x \n                    && player.pos.x < actor.pos.x + actor.size.x) \n                || (player.pos.x < actor.pos.x \n                    && player.pos.x + player.size.x > actor.pos.x + actor.size.x) \n                || (player.pos.x > actor.pos.x && player.pos.x + player.size.x < actor.pos.x + actor.size.x )\n            )\n        ) { return('bottomOverlap'); }\n\n        if (\n            (-horizontalOverlap >= horizontalDistance - .1 && -horizontalOverlap <= horizontalDistance + .1) \n                && (\n                (player.pos.y + player.size.y > actor.pos.y \n                    && player.pos.y + player.size.y < actor.pos.y + actor.size.y) \n                || (player.pos.y > actor.pos.y \n                    && player.pos.y < actor.pos.y + actor.size.y) \n                || (player.pos.y < actor.pos.y \n                    && player.pos.y + player.size.y > actor.pos.y + actor.size.y) \n                || (player.pos.y > actor.pos.y && player.pos.y + player.size.y < actor.pos.y + actor.size.y )\n            )\n        ) { return('leftOverlap'); }\n\n        if (\n            (horizontalOverlap >= horizontalDistance - .1 && horizontalOverlap <= horizontalDistance + .1) \n                && (\n                (player.pos.y + player.size.y > actor.pos.y \n                    && player.pos.y + player.size.y < actor.pos.y + actor.size.y) \n                || (player.pos.y > actor.pos.y \n                    && player.pos.y < actor.pos.y + actor.size.y) \n                || (player.pos.y < actor.pos.y \n                    && player.pos.y + player.size.y > actor.pos.y + actor.size.y) \n                || (player.pos.y > actor.pos.y && player.pos.y + player.size.y < actor.pos.y + actor.size.y )\n            )\n        ) { return('rightOverlap'); }\n\n        // console.log(horizontalOverlap, \"vo\", verticalDistance, \"vd\");\n\n        // console.log(-verticalOverlap > verticalDistance - .2 && -verticalOverlap < verticalDistance + .2, verticalOverlap, verticalDistance);\n\n        // const leftOverlap = (player.pos.x + player.size.x > actor.pos.x && player.pos.x < actor.pos.x);\n\n        // const rightOverlap = (player.pos.x < actor.pos.x + actor.size.x && player.pos.x + player.size.x > actor.pos.x + actor.size.x);\n\n        // const topOverlap = (player.pos.y + player.size.y > actor.pos.y && player.pos.y < actor.pos.y);\n\n        // const bottomOverlap = (player.pos.y < actor.pos.y + actor.size.y && player.pos.y + player.size.y > actor.pos.y + actor.size.y);\n\n\n        // if (leftOverlap && !rightOverlap && (topOverlap || bottomOverlap)) {\n        //     debugger;\n        //     return 'left';\n        // }\n\n        // if (rightOverlap && !leftOverlap && (topOverlap || bottomOverlap)) {\n        //     debugger;            \n        //     return 'right';\n        // }\n\n        // if (topOverlap && !bottomOverlap && (leftOverlap || rightOverlap)) {\n        //     debugger;\n        //     return 'top';\n        // }\n        \n        // if (bottomOverlap && !topOverlap && (leftOverlap || rightOverlap)) {\n        //     debugger;\n        //     return 'bottom';\n        // }\n    }\n\n        else {\n            return player.pos.x + player.size.x > actor.pos.x && player.pos.x < actor.pos.x + actor.size.x && player.pos.y + player.size.y > actor.pos.y && player.pos.y < actor.pos.y + actor.size.y;\n        }\n    }\n\n    // any place I return keys.switch is to make sure the user doesn't hold down the switch key and have the characters switch rapidly between each other\n    update(time, keys) {\n        let actors = this.actors.map(actor => actor.update(time, this, keys));\n        \n        // if s is being pressed and wasn't already being pressed, AND if the current player isn't jumping/falling/etc, switch player\n        if (keys.switch && !this.switch && this.player.speed.y === 0) return new State(this.level, actors, this.status, this.nonPlayers[0], keys.switch);\n\n        let newState = new State(this.level, actors, this.status, this.player, keys.switch, this.gravity, this.finleyStatus, this.frankieStatus);\n        if (newState.status !== 'playing') return newState;\n\n        let player = newState.player;\n\n        switch (this.level.touching(player.pos, player.size)) {\n            case 'poison':\n                return new State(this.level, actors, 'lost', this.player);\n            case 'trampoline':\n                return new State(this.level, actors, 'playing', this.player, keys.switch, -this.gravity, this.finleyStatus, this.frankieStatus);\n            case 'finleyGoal':\n                return new State(this.level, actors, 'won', this.player);\n            default:\n                break;\n        }\n\n        // if (player.constructor.name === 'Finley' && this.level.touching(player.pos, player.size) === 'finleyGoal') {\n        //     if (this.status === 'frankieWon') return new State(this.level, actors, 'won');\n        //     return new State(this.level, actors, this.status, this.player, this.switch, this.gravity, 'finleyWon', this.frankieStatus);\n        // } else if (player.constructor.name === 'Frankie' && this.level.touching(player.pos, player.size) == 'frankieGoal') {\n        //     if (this.status === 'finleyWon') return new State(this.level, actors, 'won');\n        //     return new State(this.level, actors, this.status, this.player, this.switch, this.gravity, this.finleyStatus, 'frankieWon');\n        // }\n\n        // if ((this.level.touching(player.pos, player.size)) === 'finleyGoal' || 'frankieGoal') {\n        //     return new State(this.level, actors, 'won');\n        // }\n\n        // if (keys.esc) {\n        //     return new State(this.level, actors, 'paused');\n        // }\n\n        for (let actor of actors) {\n            const overlap = this.overlap(player, actor);\n            if (overlap && Object.getPrototypeOf(Object.getPrototypeOf(actor)).constructor.name !== 'Player') return actor.collide(newState);\n\n        }\n\n            // const overlap = this.overlap(player, actor);\n            // if (overlap && Object.getPrototypeOf(Object.getPrototypeOf(actor)).constructor.name !== 'Player') {\n            //     newState = actor.collide(newState);\n            // }\n        // }\n\n        return newState;\n    }\n}\n\nexport default State;\n\n\n// WEBPACK FOOTER //\n// ./test/state.js","import Level from './level';\nimport Display from './display';\nimport levelMaps from './level_maps';\nimport State from './state';\n\nconst keyCodes = {\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    83: 'switch'\n};\n\nconst audio = document.getElementById('intro');\nconst finish = document.getElementById('level-finish');\naudio.volume = finish.volume = 0.2;\n\nconst detectKeys = () => {\n    // to avoid error with indexing into something that doesn't exist\n    const isPressed = Object.create(null);\n\n    const track = (e) => {\n        if (keyCodes.hasOwnProperty(e.keyCode)) {\n            e.preventDefault();\n            const isKeydown = (e.type === 'keydown');\n            isPressed[keyCodes[e.keyCode]] = isKeydown;\n        }\n    };\n\n    window.addEventListener('keydown', track);\n    window.addEventListener('keyup', track);\n    \n    return isPressed;\n};\n\n// calls requestAnimation again after every frame\nconst runAnimation = (frameFunction) => {\n    // last time since window has been open\n    let lastTime = null;\n\n    const frame = (time) => {\n        if (lastTime !== null) {\n            // converts time between ms and s for convenience\n            let timeStep = Math.min(time - lastTime, 100) / 1000;\n            if (frameFunction(timeStep) === false) return;\n        }\n\n        lastTime = time;\n        requestAnimationFrame(frame);\n    };\n\n    requestAnimationFrame(frame);\n};\n\nconst runLevel = (level, successFunction) => {\n    const gameWrapper = document.getElementById('game-wrapper');\n    const display = new Display(gameWrapper, level);\n    let state = State.start(level);\n    let ending = 1;\n\n\n    runAnimation(time => {\n        state = state.update(time, keys);\n        display.drawFrame(state);\n        // console.log(state.status);\n        if (state.status === 'playing') {\n            // console.log(state.status);\n            return true;\n        } else if (ending > 0) {\n            // debugger;\n            finish.play();\n            ending -= time;\n            return true;\n        } else {\n            // debugger;\n            display.clear();\n            successFunction(state.status);\n            return false;\n        }\n    });\n};\n\nconst runGame = () => {\n    audio.play();\n    const startLevel = (n) => {\n        runLevel(new Level(levelMaps[n]), status => {\n            // debugger;\n            if (status === 'lost') {\n                startLevel(n);\n            } else if (n < levelMaps.length - 1) {\n                startLevel(n + 1);\n            } else {\n                alert('you win!');\n            }\n        });\n    };\n\n    // goToTitleScreen();\n    startLevel(0);\n};\n\n\nconst keys = detectKeys();\nrunGame();\n\n\n// WEBPACK FOOTER //\n// ./test/power-of-friendship.js","import Vector from \"./vector\";\nimport Finley from './finley';\nimport Frankie from './frankie';\nimport Poison from './poison';\nimport Player from \"./player\";\nimport { SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION } from \"constants\";\n\nconst actorChars = {\n    'i': Finley,\n    'r': Frankie,\n    // '1': Player,\n    '=': Poison, '|': Poison, 'v': Poison\n};\n\nclass Level {\n    constructor(levelMap) {\n        this.rows = [];\n        this.width = levelMap[0].length; // width of level determined my first row\n        this.height = levelMap.length; // # of rows in array\n        this.actors = []; // array of 'actors' i.e. non-background objs\n\n        for (let y = 0; y < this.height; y++) { // iterate over each string in the map\n            const line = levelMap[y];\n            const currRow = [];\n\n            for (let x = 0; x < this.width; x++) { // iterate over each character\n                const ch = line[x];\n                let fieldType;\n\n                const Actor = actorChars[ch];\n                if (Actor) { \n                    this.actors.push(new Actor(new Vector(x, y), ch));\n                }\n                else {\n                    switch(ch) {\n                        case 'x':\n                            fieldType = 'wall';\n                            break;\n                        case 'w':\n                            fieldType = 'water';\n                            break;                            \n                        case 'p':\n                            fieldType = 'poison';\n                            break;  \n                        case '!':\n                            fieldType = 'finleyGoal';\n                            break;\n                        case '@':\n                            fieldType = 'frankieGoal';\n                            break;\n                        case 't':\n                            fieldType = 'trampoline';\n                            break;\n                        case '1':\n                            fieldType = 'instruction one';\n                            break;\n                        case '2':\n                            fieldType = 'instruction two';\n                            break;\n                        case '3':\n                            fieldType = 'instruction three';\n                            break;\n                        case '4':\n                            fieldType = 'instruction four';\n                            break;\n                        default:\n                            fieldType = null;\n                            break;\n                    }\n                }\n                currRow.push(fieldType);\n            }\n\n            this.rows.push(currRow);\n        }\n    }\n\n    touching(pos, size) {\n        // defines boundaries of what counts as touching\n        const xStart = Math.floor(pos.x);\n        const xEnd = Math.ceil(pos.x + size.x);\n        const yStart = Math.floor(pos.y);\n        const yEnd = Math.ceil(pos.y + size.y);\n        // console.log (xStart, xEnd, yStart, yEnd);\n\n        // if the user hits top/right/left margins, it's a wall\n        if (xStart < 0 || xEnd > this.width || yStart < 0) {\n            return \"wall\";\n        }\n\n        // if the user hits the bottom margin, it counts as poison\n        if (yEnd > this.height) {\n            return \"poison\";\n        }\n\n\n        for (let y = yStart; y < yEnd; y++) {\n            for (let x = xStart; x < xEnd; x++) {\n                const fieldType = this.rows[y][x];\n                if (fieldType) return fieldType;\n            }\n        }\n    }\n\n\n}\n\nexport default Level;\n\n\n// WEBPACK FOOTER //\n// ./test/level.js","import Player from './player';\nimport Vector from './vector';\n\nclass Finley extends Player {\n    constructor(pos, ch, speed, size, xSpeed, jumpSpeed) {\n        const finleySize = size || new Vector(.8, 1.5);\n        const finleyXSpeed = xSpeed || 7;\n        const finleyJumpSpeed = jumpSpeed || 7;\n        super(pos, ch, speed, finleySize, finleyXSpeed, finleyJumpSpeed);\n    }\n}\n\nexport default Finley;\n\n\n// WEBPACK FOOTER //\n// ./test/finley.js","import Player from './player';\nimport Vector from './vector';\n\nclass Frankie extends Player {\n    constructor(pos, ch, speed, size, xSpeed, jumpSpeed) {\n        const frankieSize = size || new Vector(1.5, .8);\n        const frankieXSpeed = xSpeed || 5;\n        const frankieJumpSpeed = jumpSpeed || 6;\n        super(pos, ch, speed, frankieSize, frankieXSpeed, frankieJumpSpeed);\n    }\n}\n\nexport default Frankie;\n\n\n// WEBPACK FOOTER //\n// ./test/frankie.js","import Vector from './vector';\nimport State from './state';\n\nclass Poison {\n    constructor(pos, ch, speed, resetPos) {\n        this.pos = pos;\n        this.size = new Vector(1, 1);\n        this.ch = ch;\n        \n        switch(ch) {\n            case '=':\n                this.speed = speed || new Vector(2, 0); // sideways lava\n                break;\n            case '|':\n                this.speed = speed || new Vector(0, 2); // speed in terms of vector, up & down\n                break;\n            case 'v':\n                this.speed = speed || new Vector(0, 3);\n                this.resetPos = resetPos || pos; // original starting position\n                break;\n            default:\n                this.speed = new Vector(0, 0);\n                break;\n        }\n\n    }\n\n    collide(state) {\n        return new State(state.level, state.actors, 'lost', state.player);\n    }\n\n    update(time, state) {\n        const newPos = this.pos.plus(this.speed.times(time));\n        // if poison touching a wall, just reset\n        if (!state.level.touching(newPos, this.size)) {\n            return new Poison(newPos, this.ch, this.speed, this.resetPos);\n        } else if (this.resetPos) {\n            return new Poison(this.resetPos, this.ch, this.speed, this.resetPos);\n        } else {\n            return new Poison(this.pos, this.ch, this.speed.times(-1));\n        }\n    }\n}\n\nexport default Poison;\n\n\n// WEBPACK FOOTER //\n// ./test/poison.js","module.exports = {\"O_RDONLY\":0,\"O_WRONLY\":1,\"O_RDWR\":2,\"S_IFMT\":61440,\"S_IFREG\":32768,\"S_IFDIR\":16384,\"S_IFCHR\":8192,\"S_IFBLK\":24576,\"S_IFIFO\":4096,\"S_IFLNK\":40960,\"S_IFSOCK\":49152,\"O_CREAT\":512,\"O_EXCL\":2048,\"O_NOCTTY\":131072,\"O_TRUNC\":1024,\"O_APPEND\":8,\"O_DIRECTORY\":1048576,\"O_NOFOLLOW\":256,\"O_SYNC\":128,\"O_SYMLINK\":2097152,\"O_NONBLOCK\":4,\"S_IRWXU\":448,\"S_IRUSR\":256,\"S_IWUSR\":128,\"S_IXUSR\":64,\"S_IRWXG\":56,\"S_IRGRP\":32,\"S_IWGRP\":16,\"S_IXGRP\":8,\"S_IRWXO\":7,\"S_IROTH\":4,\"S_IWOTH\":2,\"S_IXOTH\":1,\"E2BIG\":7,\"EACCES\":13,\"EADDRINUSE\":48,\"EADDRNOTAVAIL\":49,\"EAFNOSUPPORT\":47,\"EAGAIN\":35,\"EALREADY\":37,\"EBADF\":9,\"EBADMSG\":94,\"EBUSY\":16,\"ECANCELED\":89,\"ECHILD\":10,\"ECONNABORTED\":53,\"ECONNREFUSED\":61,\"ECONNRESET\":54,\"EDEADLK\":11,\"EDESTADDRREQ\":39,\"EDOM\":33,\"EDQUOT\":69,\"EEXIST\":17,\"EFAULT\":14,\"EFBIG\":27,\"EHOSTUNREACH\":65,\"EIDRM\":90,\"EILSEQ\":92,\"EINPROGRESS\":36,\"EINTR\":4,\"EINVAL\":22,\"EIO\":5,\"EISCONN\":56,\"EISDIR\":21,\"ELOOP\":62,\"EMFILE\":24,\"EMLINK\":31,\"EMSGSIZE\":40,\"EMULTIHOP\":95,\"ENAMETOOLONG\":63,\"ENETDOWN\":50,\"ENETRESET\":52,\"ENETUNREACH\":51,\"ENFILE\":23,\"ENOBUFS\":55,\"ENODATA\":96,\"ENODEV\":19,\"ENOENT\":2,\"ENOEXEC\":8,\"ENOLCK\":77,\"ENOLINK\":97,\"ENOMEM\":12,\"ENOMSG\":91,\"ENOPROTOOPT\":42,\"ENOSPC\":28,\"ENOSR\":98,\"ENOSTR\":99,\"ENOSYS\":78,\"ENOTCONN\":57,\"ENOTDIR\":20,\"ENOTEMPTY\":66,\"ENOTSOCK\":38,\"ENOTSUP\":45,\"ENOTTY\":25,\"ENXIO\":6,\"EOPNOTSUPP\":102,\"EOVERFLOW\":84,\"EPERM\":1,\"EPIPE\":32,\"EPROTO\":100,\"EPROTONOSUPPORT\":43,\"EPROTOTYPE\":41,\"ERANGE\":34,\"EROFS\":30,\"ESPIPE\":29,\"ESRCH\":3,\"ESTALE\":70,\"ETIME\":101,\"ETIMEDOUT\":60,\"ETXTBSY\":26,\"EWOULDBLOCK\":35,\"EXDEV\":18,\"SIGHUP\":1,\"SIGINT\":2,\"SIGQUIT\":3,\"SIGILL\":4,\"SIGTRAP\":5,\"SIGABRT\":6,\"SIGIOT\":6,\"SIGBUS\":10,\"SIGFPE\":8,\"SIGKILL\":9,\"SIGUSR1\":30,\"SIGSEGV\":11,\"SIGUSR2\":31,\"SIGPIPE\":13,\"SIGALRM\":14,\"SIGTERM\":15,\"SIGCHLD\":20,\"SIGCONT\":19,\"SIGSTOP\":17,\"SIGTSTP\":18,\"SIGTTIN\":21,\"SIGTTOU\":22,\"SIGURG\":16,\"SIGXCPU\":24,\"SIGXFSZ\":25,\"SIGVTALRM\":26,\"SIGPROF\":27,\"SIGWINCH\":28,\"SIGIO\":23,\"SIGSYS\":12,\"SSL_OP_ALL\":2147486719,\"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION\":262144,\"SSL_OP_CIPHER_SERVER_PREFERENCE\":4194304,\"SSL_OP_CISCO_ANYCONNECT\":32768,\"SSL_OP_COOKIE_EXCHANGE\":8192,\"SSL_OP_CRYPTOPRO_TLSEXT_BUG\":2147483648,\"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS\":2048,\"SSL_OP_EPHEMERAL_RSA\":0,\"SSL_OP_LEGACY_SERVER_CONNECT\":4,\"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER\":32,\"SSL_OP_MICROSOFT_SESS_ID_BUG\":1,\"SSL_OP_MSIE_SSLV2_RSA_PADDING\":0,\"SSL_OP_NETSCAPE_CA_DN_BUG\":536870912,\"SSL_OP_NETSCAPE_CHALLENGE_BUG\":2,\"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG\":1073741824,\"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG\":8,\"SSL_OP_NO_COMPRESSION\":131072,\"SSL_OP_NO_QUERY_MTU\":4096,\"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION\":65536,\"SSL_OP_NO_SSLv2\":16777216,\"SSL_OP_NO_SSLv3\":33554432,\"SSL_OP_NO_TICKET\":16384,\"SSL_OP_NO_TLSv1\":67108864,\"SSL_OP_NO_TLSv1_1\":268435456,\"SSL_OP_NO_TLSv1_2\":134217728,\"SSL_OP_PKCS1_CHECK_1\":0,\"SSL_OP_PKCS1_CHECK_2\":0,\"SSL_OP_SINGLE_DH_USE\":1048576,\"SSL_OP_SINGLE_ECDH_USE\":524288,\"SSL_OP_SSLEAY_080_CLIENT_DH_BUG\":128,\"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG\":0,\"SSL_OP_TLS_BLOCK_PADDING_BUG\":512,\"SSL_OP_TLS_D5_BUG\":256,\"SSL_OP_TLS_ROLLBACK_BUG\":8388608,\"ENGINE_METHOD_DSA\":2,\"ENGINE_METHOD_DH\":4,\"ENGINE_METHOD_RAND\":8,\"ENGINE_METHOD_ECDH\":16,\"ENGINE_METHOD_ECDSA\":32,\"ENGINE_METHOD_CIPHERS\":64,\"ENGINE_METHOD_DIGESTS\":128,\"ENGINE_METHOD_STORE\":256,\"ENGINE_METHOD_PKEY_METHS\":512,\"ENGINE_METHOD_PKEY_ASN1_METHS\":1024,\"ENGINE_METHOD_ALL\":65535,\"ENGINE_METHOD_NONE\":0,\"DH_CHECK_P_NOT_SAFE_PRIME\":2,\"DH_CHECK_P_NOT_PRIME\":1,\"DH_UNABLE_TO_CHECK_GENERATOR\":4,\"DH_NOT_SUITABLE_GENERATOR\":8,\"NPN_ENABLED\":1,\"RSA_PKCS1_PADDING\":1,\"RSA_SSLV23_PADDING\":2,\"RSA_NO_PADDING\":3,\"RSA_PKCS1_OAEP_PADDING\":4,\"RSA_X931_PADDING\":5,\"RSA_PKCS1_PSS_PADDING\":6,\"POINT_CONVERSION_COMPRESSED\":2,\"POINT_CONVERSION_UNCOMPRESSED\":4,\"POINT_CONVERSION_HYBRID\":6,\"F_OK\":0,\"R_OK\":4,\"W_OK\":2,\"X_OK\":1,\"UV_UDP_REUSEADDR\":4}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/constants-browserify/constants.json\n// module id = 8\n// module chunks = 0","const scale = 60; // scale units into pixels\n\n// helper function to create an element in the dom and give it a class;\n\nconst createElement = (name, className) => {\n    const element = document.createElement(name);\n    if (className) element.className = className;\n    return element;\n};\n\nclass Display {\n    constructor(parent, level) {\n        this.wrapper = parent.appendChild(createElement('div', 'game')); // create wrapper for actual game (since screen will be slipping off)\n        // this.wrapper = parent;\n\n        this.level = level;\n\n        // tracks element that holds actors so they can be removed/replaced\n        this.actorLayer = null; // background and actor layers important for time save\n\n        this.wrapper.appendChild(this.drawBackground());\n\n        this.drawActors = this.drawActors.bind(this);\n    }\n\n    // drawn once\n    drawBackground() { \n        const table = createElement('table', 'background');\n        table.style.width = `${this.level.width * scale}px`; // sets specifc style, doesn't change other inline styles\n\n        // iterate over each row of the previously built out grid (full of just words)\n        this.level.rows.forEach(row => {\n\n            // create row to append to the parent table\n            const rowElement = table.appendChild(createElement('tr'));\n\n            rowElement.style.height = `${scale}px`;\n\n            row.forEach(fieldType => {\n                // append individual tiles onto row\n                rowElement.appendChild(createElement('td', fieldType));\n            });\n        });\n\n        return table;\n    }\n\n    // drawn every time the display is updated with the given state\n    drawActors(actors) {\n        const wrapper = createElement('div');\n\n        actors.forEach(actor => {\n            const el = wrapper.appendChild(createElement('div', `actor ${actor.constructor.name.toLowerCase()}`)); // actor.constructor.name finds the name of the class of the actor\n            el.style.width = `${actor.size.x * scale}px`;\n            el.style.height = `${actor.size.y * scale}px`;\n            el.style.left = `${actor.pos.x * scale}px`;\n            el.style.top = `${actor.pos.y * scale}px`;\n        });\n\n        return wrapper;\n    }\n\n    drawFrame(state) {\n        if (this.actorLayer) this.actorLayer.remove();\n        this.actorLayer = this.drawActors(state.actors);\n        this.wrapper.appendChild(this.actorLayer);\n        this.wrapper.className = `game ${state.status}`;\n        this.scrollPlayerIntoView(state);\n    }\n\n    scrollPlayerIntoView(state) {\n        const width = this.wrapper.clientWidth; // takes width of game div\n        const height = this.wrapper.clientHeight;\n        const margin = width / 3; // it bugs out if I try too hard to make it centered???\n        \n        const left = this.wrapper.scrollLeft;\n        const right = left + width;\n        const top = this.wrapper.scrollTop;\n        const bottom = top + height;\n        \n        const player = state.player;\n        const center = player.pos.plus(player.size.times(0.5)).times(scale); // to find the player's center, we add the position + half the size\n\n\n        // if we set scrollLeft or scrollTop to negative number, it will re-center to 0\n        // margin creates a \"neutral\" area to not force player into the center\n        if (center.x < left + margin) {\n            this.wrapper.scrollLeft = center.x - margin;\n        } else if (center.x > right - margin) {\n            this.wrapper.scrollLeft = center.x + margin - width;\n        } \n        \n        if (center.y < top + margin) {\n            this.wrapper.scrollTop = center.y - margin;\n        } else if (center.y > bottom - margin) {\n            this.wrapper.scrollTop = center.y + margin - height;\n        }\n\n    }\n\n    clear() {\n        // odd syntax to remove the wrapper because htmlelements are weird!\n        this.wrapper.parentNode.removeChild(this.wrapper);\n    }\n}\n\nexport default Display;\n\n\n// WEBPACK FOOTER //\n// ./test/display.js","const levelMaps = [\n\n  [   \"xxxxxxxxxxxxxxx                              v    xxxxx            \",\n  \"x             x                 |                                 =\",\n  \"x   i         x                                                  \",\n  \"x                                               xxxxx            \",\n  \"x   r       x                                                     \",\n  \"x                                           !      \",\n  \"xxxxxxxxxxxxxxxxxwwwwwwwpppppppxxxxtxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n]];\n\n\n    // [   \"xxxxxxxxxxxxxxx                                  xxxxx            \",\n    //     \"x             x                                    r              \",\n    //     \"x   i         x                                    @              \",\n    //     \"x             x                                  xxxxx            \",\n    //     \"x             x                                    3              \",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x         1   x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x        2    x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x             x\",\n    //     \"x         !   x\",\n    //     \"xxxxxxxxxxxxxxx\"\n    //   ],\n    //   [\n    //     \"                                                                \",\n    //     \"                      \",   \n    //     \"                     \",\n    //     \" x                   \",\n    //     \" x                     \",\n    //     \" x                                           \",\n    //     \" x                                x          x         x\",\n    //     \" x                                x          x         x\",\n    //     \" x                              ! x          x         x\",\n    //     \" x                      4         x          x         x\",\n    //     \" x                                x          x         x\",\n    //     \" x i                              xxxxxxxxxxxx      r  x\",\n    //     \" x                                                     x\",    \n    //     \" xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\n    //     \"      \",\n    //     \"       \",\n    //     \"                      \"\n    //   ],\n      //     \"                                                                \",\n      //     \" x                                                     x\",   \n      //     \" x                                                     x\",\n      //     \" x                                                     x\",\n      //     \" x                      t                              x\",\n      //     \" x                                                     x\",\n      //     \" x                           t                         x\",\n      //     \" x                    t                                x\",\n      //     \" x                                                     x\",\n      //     \" x               xxxxxxxxxxxxxxxxxx                    x\",\n      //     \" x              xxxxxxxxxxxxxxxxxxxx                   x\",\n      //     \" x i           xxxxxxxxxxxxxxxxxxxxxx               r  x\",\n      //     \" x            xxxxxxxxxxxxxxxxxxxxxxxx                 x\",    \n      //     \" xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\n      //     \"      \",\n      //     \"       \",\n      //     \"                      \"\n      //   ],\n      // [   \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x             x\",\n      //     \"x    i    r   x\",\n      //     \"x             x\",\n      //     \"xxxxxxxxxxxxxxx\"\n    // ];\n    \n    \nexport default levelMaps;\n\n\n// WEBPACK FOOTER //\n// ./test/level_maps.js"],"sourceRoot":""}